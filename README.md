# rpi_stat_tg_bot

Реализация телеграмм-бота, управляющий RAID массивом.
Функции:
- Монтирование RAID массива
- Вывод справочной информации по массиву
- Скачивание видео с YouTube, VK
- Складывание видео в RAID
- Вывод информации по скачиваемым видео

Скачивание происходит в двухканальном режиме, этого достаточно, что бы нагрузка на цп была равномерной, увеличение или снятие ограничения на количество одновременных процессов приведет к сильному ухудшению производительности и потенциальной не надежности работы скачивальщика.

# Настройка ftp сервера
https://lumpics.ru/how-to-create-ftp-server-in-linux/

# Добавление программы в автозагузку Linux

Написание sh скрипта https://stackoverflow.com/questions/3953886/linux-run-a-binary-in-a-script

Написание скрипта автозапуска https://losst.pro/avtozagruzka-linux


Посмотреть примеры скриптов можно тут в example_run_script и systemd_service_example

# Создание программного RAID-массива на mdadm

https://www.dmosk.ru/miniinstruktions.php?mini=mdadm

https://losst.pro/programmnyj-raid-v-linux




# Общий флоу запуска бота
0. Создать бота в телеграмм
1. Нужно создать RAID-массив, если нет возможности, то кнопка AutoConnect работать не будет
2. Создайте конфиг-файл, в котором укажите:
    - Токен бота в тг
    - Время на реакцию чата. Можно поставить больше 60
    - Свой чат id c ботом. Узнать его можно после запуска, введите любое сообщение в чат, бот напишет ваш с ним чат id
    - FTP пользователя, если используете RAID + sftp
    - Признак имени RAID, например, md
    - Путь, куда складывать скачанные видео
3. Создайте скрипт через который демон будет запускать сервис. Если запуск сводится к простому вызову бинарника и передачи пути к конфигу, то можно пропустить этот этап. Пример: example_run_script
4. Создайте демона в systemd. Обратите внимание, что запуск будет производиться от пользователя. Пример: systemd_service_example
5. Перезапустите systemd через deamon-reload или перезагрузите систему целиком.

Готово (?)